@model SmartPlant.Models.ViewModels.PreferencesViewModel

@{
    ViewData["Title"] = "Preferences";
    Layout = User.IsInRole("Admin") ? "~/Views/Shared/_AdminLayout.cshtml" : "~/Views/Shared/_Layout.cshtml";
}

<div class="container mt-4">
    <!-- Back to Profile Link -->
    <div class="mb-3">
        <a asp-action="Profile" class="text-decoration-none text-dark">
            <span style="font-size: 1.2rem;">&larr; Back to Profile</span>
        </a>
    </div>

    <!-- Page Title -->
    <h2 class="text-center mb-2">Preferences</h2>
    <p class="text-center mb-4">Manage your notification and reminder settings.</p>

    <!-- Preferences Container -->
    <div class="row justify-content-center">
        <div class="col-md-6">
            <div class="p-4" style="background-color: #d4e4d4; border: 1px solid #999;">

                @if (TempData["Success"] != null)
                {
                    <div class="alert alert-success alert-dismissible fade show" role="alert">
                        @TempData["Success"]
                        <button type="button" class="btn-close" data-bs-dismiss="alert"></button>
                    </div>
                }

                <form asp-action="Preferences" method="post">
                    @Html.AntiForgeryToken()

                    <!-- Reminder Time -->
                    <div class="mb-3">
                        <label asp-for="ReminderTime" class="form-label" style="font-weight: bold;">Reminder Time:</label>
                        <input asp-for="ReminderTime" type="time" class="form-control" style="background-color: white; border: 1px solid #999;" />
                        <span asp-validation-for="ReminderTime" class="text-danger small"></span>
                        <small class="text-muted">Example: 09:00</small>
                    </div>

                    <!-- Time Zone -->
                    <div class="mb-3">
                        <label asp-for="TimeZone" class="form-label" style="font-weight: bold;">Time Zone:</label>
                        <select asp-for="TimeZone" class="form-control" style="background-color: white; border: 1px solid #999;">
                            <option value="Turkey Standard Time">Turkey (UTC+3)</option>
                            <option value="GMT Standard Time">GMT (UTC+0)</option>
                            <option value="Eastern Standard Time">Eastern Time (UTC-5)</option>
                            <option value="Central Standard Time">Central Time (UTC-6)</option>
                            <option value="Pacific Standard Time">Pacific Time (UTC-8)</option>
                        </select>
                        <span asp-validation-for="TimeZone" class="text-danger small"></span>
                    </div>

                    <!-- Reminder Frequency -->
                    <div class="mb-3">
                        <label asp-for="ReminderFrequency" class="form-label" style="font-weight: bold;">Reminder Frequency:</label>
                        <select asp-for="ReminderFrequency" class="form-control" style="background-color: white; border: 1px solid #999;">
                            <option value="Daily">Daily</option>
                            <option value="Weekly">Weekly Summary</option>
                        </select>
                        <span asp-validation-for="ReminderFrequency" class="text-danger small"></span>
                    </div>

                    <!-- Notification Channels -->
                    <div class="mb-4">
                        <label class="form-label" style="font-weight: bold;">Notification Channels:</label>

                        <!-- Email Notifications -->
                        <div class="form-check mb-2">
                            <input asp-for="EmailNotificationsEnabled" type="checkbox" class="form-check-input" id="emailNotifications" />
                            <label class="form-check-label" for="emailNotifications">
                                Email Notifications
                            </label>
                        </div>

                        <!-- In-App Notifications -->
                        <div class="form-check">
                            <input asp-for="InAppNotificationsEnabled" type="checkbox" class="form-check-input" id="inAppNotifications" />
                            <label class="form-check-label" for="inAppNotifications">
                                In-App Alerts
                            </label>
                        </div>
                    </div>

                    <!-- Save Button -->
                    <div class="text-center">
                        <button type="submit" class="btn" style="background-color: #8b9f7f; color: white; border-radius: 5px; padding: 8px 40px;">Save Preferences</button>
                    </div>

                    @if (ViewData.ModelState.Count > 0 && !ViewData.ModelState.IsValid)
                    {
                        <div class="alert alert-danger mt-3">
                            @Html.ValidationSummary(false)
                        </div>
                    }
                </form>
            </div>
        </div>
    </div>

    <!-- Extra spacing for footer -->
    <div style="height: 150px;"></div>
</div>

@section Scripts {
    @{await Html.RenderPartialAsync("_ValidationScriptsPartial");}
}